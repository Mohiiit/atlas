<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module 00 - DeFi Mental Model</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{--bg:#f8fafc;--surface:#ffffff;--text:#0f172a;--dim:#475569;--border:#dbe3ef;--accent:#0f766e;--accent2:#b45309}
@media (prefers-color-scheme: dark){:root{--bg:#0b1220;--surface:#111b2e;--text:#e2e8f0;--dim:#8aa0c2;--border:#24334d;--accent:#2dd4bf;--accent2:#f59e0b}}
*{box-sizing:border-box} body{margin:0;font-family:'Space Grotesk',sans-serif;background:radial-gradient(circle at 20% 0%, rgba(15,118,110,.12), transparent 40%),var(--bg);color:var(--text);padding:28px}
main{max-width:1050px;margin:0 auto}
h1{font-size:34px;margin:0 0 4px} .sub{font-family:'JetBrains Mono',monospace;color:var(--dim);font-size:12px;margin:0 0 18px}
.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px} @media(max-width:850px){.grid{grid-template-columns:1fr}}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px}
pre.mermaid{margin:0;overflow:auto}
label{display:block;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--accent);margin-bottom:10px;text-transform:uppercase}
ul{margin:8px 0 0 18px;color:var(--dim)} li{margin:7px 0}
strong{color:var(--text)} code{font-family:'JetBrains Mono',monospace;background:rgba(15,118,110,.12);padding:1px 5px;border-radius:5px}
</style>
</head>
<body>
<main>
  <h1>Module 00: DeFi as State Machines</h1>
  <p class="sub">First principles before protocol details</p>
  <div class="grid">
    <section class="card">
      <label>Mechanism Map</label>
      <pre class="mermaid">flowchart TD
        A[User Intent\ntrade/borrow/hedge] --> B[Action Call\nswap borrow mint]
        B --> C[State Transition]
        C --> D{Invariant Holds?}
        D -->|Yes| E[Settlement + New State]
        D -->|No| F[Revert / Liquidate / Pause]
        E --> G[Incentive Loop\nfees pnl emissions]
        G --> H[New user behavior]
        H --> A
      </pre>
    </section>
    <section class="card">
      <label>Worked Lens</label>
      <p><strong>Claim:</strong> "Delta-neutral 15% APY"</p>
      <ul>
        <li>Identify payer: fees, inflation, basis, or hidden leverage.</li>
        <li>Identify state variable that can break: oracle lag, funding inversion, liquidity drought.</li>
        <li>Write break condition: <code>equity &lt; maintenance margin</code> or <code>peg deviation &gt; threshold</code>.</li>
      </ul>
      <label style="margin-top:14px">Protocol X-Ray Checklist</label>
      <ul>
        <li>State variables</li>
        <li>Actions</li>
        <li>Invariants</li>
        <li>Revenue source</li>
        <li>Failure path</li>
      </ul>
    </section>
  </div>
</main>
<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
mermaid.initialize({startOnLoad:true,theme:'base',look:'classic',themeVariables:{primaryColor:isDark?'#0f2f2d':'#dff7f2',primaryBorderColor:isDark?'#2dd4bf':'#0f766e',primaryTextColor:isDark?'#e2e8f0':'#0f172a',lineColor:isDark?'#93c5fd':'#334155',fontFamily:'Space Grotesk',fontSize:'15px'}});
</script>
</body>
</html>
